<html>
<head>
	<link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
	<link type="text/css" rel="stylesheet" href="/stylesheets/forum_categories.css" />
	<script src="js/jq-1.8.3.js"></script>
	<script src="js/jqui-1.9.2.js"></script>
	<script type="text/javascript" src="js/forum_categories.js"></script>
</head>
<body>
	
	<section id="content" class="content"> 
		

		<!-- This includes the sidebar-->
		{% include "/templates/sidebar.html"%}

		<section id="pagecontent" class="cleared">
			
			<section id="module_info">
				<h3>COMP2006 - Human-Computer Interaction</h3>
				<!-- 
				<dl id="module_stats">
					<dt>People Registered</dt>
					<dd>95</dd>
					<dt>Average Mark</dt>
					<dd>76</dd>
					<dt>Module Difficulty</dt>
					<dd>5/10</dd>
				</dl>
				-->
				<!-- 
				<ul type=none id="module_stats">
					<li class="value">95</li>
					<li class="descr">People Registered</li>
					<li class="value">76</li>
					<li class="descr">Average Mark</li>
					<li class="value">5/10</li>
					<li class="descr">Average Difficlity</li>
				</li>
				-->
				<section id="module_stats">
					<div class="value">{{subscribed}}</div>
					<div class="descr">People Registered</div>
					<div class="value">95</div>
					<div class="descr">Average Mark</div>
					<div class="value">5/10</div>
					<div class="descr">Average Difficlity</div>
				</section>
<!--
				<button type="button" onclick="alert('hi')">Rate anonymously</button>
				<dl id="lecturer_ratings">
					<dt><a href="">Ed Zaluska</a></dt>
					<dd>9/10</dd>
					<dt><a href="">Srinandan Long Surname</a></dt>
					<dd>9/10</dd>
				</dl>
-->
				<section id="lecturer_ratings">
					{% for rating in ratings %}
					<dl class="lecturer">
						<dt><a href={{rating.lecturer.home_page}}>{{rating.lecturer.full_name}}</a></dt>
						<dd>Rating: {{rating.totalSum/rating.totalVotes if totalVotes}}</dd>
					</dl>
					{% endfor %}
				</section>
						
			</section>

			<section id="categories">
				<section class="category">			
					{% for c in complete %}				
					<section class="container">
						<p class="handler"  id="{{c[0].key().id()}}">{{  c[0].name }}</p>
						<a href="/threads?cid={{ c[0].key().id()}}" class="more">Show more...</a>
					</section>
					<section class="handlercontent" id="cont{{c[0].key().id()}}">
						{% for th in c[1] %}
						<!-- after adding all the functionality, make this pretty and display all stats (like ratings and so on) -->
						<article class="thread">
							<a href="/showthread?tid={{ th.key().id() }}" class="thtitle">
								<b>{{th.subject}}</b>
							</a>
							<p class="details">Posted by {{th.poster.key().name()}} on {{th.timestamp.date()}}</p>							
							<p class="thbody">{{th.body[0:50]}}...</p>
							<p class="rating">Replies : {{th.answers}}</p>
						</article>
						{% endfor %}
					</section>
					{% endfor %}
				</section>
			</section>
		</section>
	</section>
</body>
</html>
